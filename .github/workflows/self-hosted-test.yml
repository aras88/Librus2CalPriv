name: Test Librus - Self Hosted

on:
  workflow_dispatch:
  schedule:
    - cron: '0 * * * *'  # Co godzinÄ™

jobs:
  sync-librus:
    # ZMIANA: uÅ¼ywamy self-hosted zamiast ubuntu-latest
    runs-on: self-hosted

    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ Ensure Python
        run: |
          python3 --version || python --version

      - name: ğŸ“¦ Install dependencies
        run: |
          pip3 install requests || pip install requests

      - name: ğŸ§ª Run Librus Sync
        env:
          LIBRUS_USERNAME: ${{ secrets.LIBRUS_USERNAME }}
          LIBRUS_PASSWORD: ${{ secrets.LIBRUS_PASSWORD }}
        run: |
          python3 test_like_postman.py || python test_like_postman.py

      - name: âœ… Success
        run: |
          echo "Synchronizacja zakoÅ„czona pomyÅ›lnie!"
          echo "Ten workflow dziaÅ‚a na Twoim komputerze,"
          echo "wiÄ™c Librus nie blokuje poÅ‚Ä…czenia."